<section @stagger [ngStyle]="{'display': verClientesPermiso() == 1 ?  'initial' : verClientesPermiso() == 2 ? 'none' : '' }">
    <div fxLayout="column" >
  
      <div class="card overflow-auto mt-5 " style="box-shadow: var(--elevation-z0);border: 0px solid rgba(0, 0, 0, 0.125);">

        <div fxLayout="row" fxflex class="p-4 table-controls" fxLayoutGap="8px">
          
          <form fxLayout="row" fxFlex.gt-xs fxLayout.xs="column" fxLayoutAlign="start center"
              fxLayoutAlign.sm="start start" fxItemAlign="center" fxItemAlign.xs="start" fxLayoutGap="24px"
              fxLayoutGap.xs="12px" [formGroup]="filters">
  
              <mat-form-field appearance="outline" fxFlexAlign.xs="stretch" style="width: 100%;" class="bold-form " floatLabel="always">
                <mat-label>Fecha Inicial</mat-label>
                <input matInput [matDatepicker]="picker" formControlName="date" placeholder="Rango de fecha"
                    autocomplete="off"  (dateChange)="dateChange($event)"/><!---->
                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
              </mat-form-field>

              <mat-form-field appearance="outline" fxFlexAlign.xs="stretch" style="width: 100%;" class="bold-form " floatLabel="always">
                <mat-label>Fecha Inicial</mat-label>
                <input matInput [matDatepicker]="picker2" formControlName="date2" placeholder="Rango de fecha"
                    autocomplete="off"  (dateChange)="dateChange($event)"/><!--(dateChange)="dateChange($event)"-->
                <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                <mat-datepicker #picker2></mat-datepicker>
              </mat-form-field>

              <mat-form-field appearance="outline" fxFlexAlign.xs="stretch" style="width: 100%;" class="bold-form"
                  floatLabel="always">
                  <mat-label>Cliente</mat-label>
                  <input matInput (keyup)="searchKeyUp($event)" #search placeholder="Nombre del  Cliente..."
                      formControlName="search" />
              </mat-form-field>
          </form>
          

      </div>

      </div>

          <div class="cont-tabla">
            <table @stagger [dataSource]="dataCredito" class="w-full"  mat-table
                matSort>
                <ng-container matColumnDef="id_pedido">
                  <th mat-header-cell *matHeaderCellDef> Id pedido </th>
                  <td mat-cell *matCellDef="let element" > {{element.id?element.id:'--'}} </td>
                </ng-container>
  
                <ng-container matColumnDef="cliente">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header> Cliente </th>
                  <td mat-cell *matCellDef="let element">{{element.appointment.name?element.appointment.name:'---'}}</td>
                </ng-container>
  
                <ng-container matColumnDef="fecha_despacho">
                  <th mat-header-cell *matHeaderCellDef> Fecha despacho </th>
                  <td mat-cell *matCellDef="let element" class="campo-normal"> {{element.appointment.date?element.appointment.date:'---'}} </td>
                </ng-container>


                <ng-container matColumnDef="estado_pedido">
                  <th mat-header-cell *matHeaderCellDef> Estado pedido </th>
                  <td mat-cell *matCellDef="let element" class="campo-normal">
                    <span [ngStyle]="{'background-color': element.appointment.status == 1 ? 'blue' :element.appointment.status == 2 ? 'orange' : element.appointment.status == 3 ? 'green' : element.appointment.status == 4 ? 'red' : element.appointment.status == 5 ? 'orange' : element.appointment.status == 6 ? 'green': ' '}" style="border-radius:10px;width: 100%;padding:10px; font-weight: bold;color: white;cursor: pointer;">
                      {{ element.appointment.status ==1 ? 'Programado': element.appointment.status ==2 ? 'Revision' : element.appointment.status == 3 ? 'Despachado' : element.appointment.status == 4 ? 'Cancelada' : element.appointment.status == 5 ? 'En descarga' : element.appointment.status == 6 ? 'Finalizado' : '---'}}
                    </span>
                  </td>
                </ng-container>
  
                <ng-container matColumnDef="ultimo_pago" style="width: 60px;">
                  <th mat-header-cell *matHeaderCellDef> Último pago </th>
                  <td mat-cell *matCellDef="let element">

                    {{element.ultimo_pago?element.ultimo_pago : '---'}}
                  </td>
                </ng-container>
  
                <ng-container matColumnDef="valor">
                  <th mat-header-cell *matHeaderCellDef> Valor pedido </th>
                  <td mat-cell *matCellDef="let element" class="campo-normal"> ${{transform(element.valor)}} </td>
                </ng-container>

                <ng-container matColumnDef="abonos">
                    <th mat-header-cell *matHeaderCellDef> Saldo </th>
                    <td mat-cell *matCellDef="let element" class="campo-normal">${{transform(element.valor-element.abonos)}}</td>
                </ng-container>

                <ng-container matColumnDef="fecha_pago">
                  <th mat-header-cell *matHeaderCellDef> Fecha pago </th>
                  <td mat-cell *matCellDef="let element" class="campo-normal">{{element.appointment.fecha_pago}}</td>
                </ng-container>
                
                <ng-container matColumnDef="estado">
                    <th mat-header-cell *matHeaderCellDef> Estado Crédito </th>
                    <td mat-cell *matCellDef="let element" class="campo-normal"><span (click)="estadoPagos(element.id)" class="tag" [ngStyle]="{'background-color': element.estado==1 ? 'red': element.estado==2 ? 'orange' : element.estado==3 ? 'green' : '' }">{{element.estado==1 ? 'No pagado' : element.estado==2 ? 'En mora' : element.estado==3 ? 'Pagado':''}}</span> </td>
                </ng-container>
  
                <ng-container matColumnDef="acciones">
                  <th mat-header-cell *matHeaderCellDef> Acciones </th>
                  <td mat-cell *matCellDef="let element" class="campo-normal">
                    <!--<button [ngStyle]="{'display': editarClientesPermiso() == 1 ?  'inherit' : editarClientesPermiso() == 2 ? 'none' : '' }" (click)="registrarCliente(element.id)" style="padding: 10px 10px;"><mat-icon class="c-azul" [icIcon]="edit"></mat-icon></button>-->
                    <!--<button [ngStyle]="{'display': editarClientesPermiso() == 1 ?  'inherit' : editarClientesPermiso() == 2 ? 'none' : '' }"  (click)="delete(element)"><ic-icon [icon]="baselineDeleteForever" inline="true" size="24px" class="c-rojo"></ic-icon></button>-->

                    <button [ngStyle]="{'display': editarClientesPermiso() == 1 ?  'inherit' : editarClientesPermiso() == 2 ? 'none' : '' }" (click)="pagosModal(element.id)" style="padding: 10px 10px;"> <span class="tag-table">Pago</span> </button>

                    <!--<button [ngStyle]="{'display': editarClientesPermiso() == 1 ?  'inherit' : editarClientesPermiso() == 2 ? 'none' : '' }" (click)="registrarCliente(element.id)" style="padding: 10px 10px;"><mat-icon class="c-azul" [icIcon]="edit"></mat-icon></button>-->
  
                    <button [ngStyle]="{'display': editarClientesPermiso() == 1 ?  'none' : editarClientesPermiso() == 2 ? 'inherit' : '' }" style="padding: 10px 10px;opacity: .2;"><mat-icon class="c-azul" [icIcon]="edit"></mat-icon></button>
                    <button style="opacity: .2;" [ngStyle]="{'display': editarClientesPermiso() == 1 ?  'none' : editarClientesPermiso() == 2 ? 'inherit' : '' }" ><ic-icon [icon]="baselineDeleteForever" inline="true" size="24px" class="c-rojo"></ic-icon></button>
  
                    <button style="padding: 10px 10px;" (click)="detallePagos(element.id)" ><mat-icon class="c-azul" [icIcon]="eye"></mat-icon></button>
                  </td>
                </ng-container>
  
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
            </table>
          </div>
        
        <!--
        <mat-paginator [length]="resultsLength" [pageSizeOptions]="pageSizeOptions"
            [pageSize]="pageSize" class="sticky left-0">
        </mat-paginator>
        -->
  
  
      </div>
  </section>