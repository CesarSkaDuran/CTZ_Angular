<vex-page-layout @stagger>

    <vex-page-layout-content fxLayout="column">
        <div fxLayout="row" fxFlex fxLayoutAlign="center stretch" fxLayoutGap="16px"
            >
            <div fxLayout="column" fxFlex="25" fxLayoutAlign="start start" class="pt-8 pl-6 pr-6 pb-6 home-card">
                <div fxLayout="row" fxLayoutAlign="start center" class="mb-2">
                    <span class="logo-circle">
                        <ic-icon [icon]="icUser" inline="true" size="24px" class=""></ic-icon>
                    </span>
                    <div fxLayout="column" fxLayoutAlign="start start" class="ml-5">
                        <h4 class="font-bold ">PRESENCIALES</h4>
                        <span class="big-number">{{total}}</span>
                    </div>
                </div>
                <button mat-flat-button color="primary" style="border-radius: 36px;" class="pl-6 pr-6 mt-3">Detalles</button>
            </div>
            <div fxLayout="column" fxFlex="25" fxLayoutAlign="start start" class="pt-8 pl-6 pr-6 pb-6 home-card">
                <div fxLayout="row" fxLayoutAlign="start center" class="mb-2">
                    <span class="logo-circle">
                        <ic-icon [icon]="icVirtual" inline="true" size="24px" class=""></ic-icon>
                    </span>
                    <div fxLayout="column" fxLayoutAlign="start start" class="ml-5">
                        <h4 class="font-bold ">VIRTUALES</h4>
                        <span class="big-number">0</span>
                    </div>
                </div>
                <button mat-flat-button color="primary" style="border-radius: 36px;"
                    class="pl-6 pr-6 mt-3">Detalles</button>
            </div>
            <div fxLayout="column" fxFlex="25" fxLayoutAlign="start start" class="pt-8 pl-6 pr-6 pb-6 home-card">
                <div fxLayout="row" fxLayoutAlign="start center" class="mb-2">
                    <span class="logo-circle">
                        <ic-icon [icon]="icPeople" inline="true" size="24px" class=""></ic-icon>
                    </span>
                    <div fxLayout="column" fxLayoutAlign="start start" class="ml-5">
                        <h4 class="font-bold ">CLIENTES</h4>
                        <span class="big-number">0</span>
                    </div>
                </div>
                <button mat-flat-button color="primary" style="border-radius: 36px;"
                    class="pl-6 pr-6 mt-3">Detalles</button>
            </div>

            <div fxLayout="column" fxFlex="25" fxLayoutAlign="start start" class="pt-8 pl-6 pr-6 pb-6 home-card">
                <div fxLayout="row" fxLayoutAlign="start center" class="mb-2">
                    <span class="logo-circle">
                        <ic-icon [icon]="icMoney" inline="true" size="24px" class=""></ic-icon>
                    </span>
                    <div fxLayout="column" fxLayoutAlign="start start" class="ml-5">
                        <h4 class="font-bold ">RECAUDADO HOY</h4>
                        <span class="big-number money">0</span>
                    </div>
                </div>
                <button mat-flat-button color="primary" style="border-radius: 36px;"
                    class="pl-6 pr-6 mt-3">Detalles</button>
            </div>
            
        </div>

        <div fxLayout="column" fxFlex fxLayoutAlign="center stretch" fxLayoutGap="8px" [ngClass]="{'hidden': !alertIsVisible}" class="p-6 mt-6" style="background-color: #673BB7;border-radius: 4px;position:relative;">
            <h4 class="font-bold text-white">¡Notificación!</h4>
            <p class="text-white">Realice el cierre de dia de manera oportuna de lo contrario podrá tener incoherencia en los informes.</p>
            <a (click)="alertIsVisible = !alertIsVisible" style="position: absolute;top: 10px;right: 12px;padding: 2px;">
                <ic-icon [icon]="icClose" style="color:white;"></ic-icon>
            </a>
        </div>

        <div class="card overflow-auto mt-5">
            <div fxLayout="row" fxflex class="p-4 table-controls" fxLayoutGap="8px">
                <div fxLayout="column" fxFlex>
                    <label for="selectDate" class="text-primary">Hora de volqueta</label>
                    <select name="date" id="selectDate">
                        <option value="1">Hoy</option>
                    </select>
                </div>
                <div fxLayout="column" fxFlex>
                    <label for="selectDoctor" class="text-primary">Trabajador</label>
                    <select name="doctor" id="selectDoctor">
                        <option value="1">Todos</option>
                    </select>
                </div>
            </div>
            <hr>
            <!-- table -->
            <div style="margin: 20px;">
            <table @stagger [dataSource]="dataPersona" class="w-full" mat-table matSort>
                <!-- Code Column -->
                  <ng-container matColumnDef="status">
                      <th  mat-header-cell *matHeaderCellDef
                          mat-sort-header>Estado</th>
                      <td mat-cell *matCellDef="let row" class="pl-0 text-secondary">
                          <div class="row">
                              <div style="border-radius: 10px;text-align: center; " fxLayout="column"
                                  fxLayoutAlign="center start"
                                  [ngStyle]="{'background-color': row.status === 1 ? 'blue' :''}">
                                  <div style="border-radius: 10px;text-align: center;" fxLayout="column"
                                      fxLayoutAlign="center start"
                                      [ngStyle]="{'background-color': row.status === 2 ? 'orange' :''}">
                                      <div style="border-radius: 10px;text-align: center;" fxLayout="column"
                                          fxLayoutAlign="center start"
                                          [ngStyle]="{'background-color': row.status === 3 ? 'green' :''}">
                                          <div style="border-radius: 10px;text-align: center;" fxLayout="column"
                                              fxLayoutAlign="center start"
                                              [ngStyle]="{'background-color': row.status === 4 ? 'red' :''}">
                                              <p style="width: 100%;padding:10px; font-weight: bold;color: white;">
                                                  {{ row.status == 1 ? "Agendada":"" }}
                                                  {{ row.status == 2 ? "Por confirmar":"" }}
                                                  {{ row.status == 3 ? "finalizada":"" }}
                                                  {{ row.status == 4 ? "cancelada":"" }}
                                              </p>
                                          </div>
                                      </div>
                                  </div>
                              </div>
                          </div>
                      </td>
                  </ng-container>

                <!-- Type Column -->
                <ng-container matColumnDef="patient">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Cliente</th>
                    <td mat-cell *matCellDef="let row" class="pl-0 text-secondary">
                        {{row.name}}
                    </td>
                </ng-container>

                <!-- Distribuitor Column -->
                <ng-container matColumnDef="phone">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>fdgdfgfsdgfsdgfdgsfgf</th>
                    <td mat-cell *matCellDef="let row" class="pl-0 text-secondary">
                        {{ row.phone_confirmation }}
                    </td>
                </ng-container>

                <!-- Type Column -->
                <ng-container matColumnDef="date">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Fecha</th>
                    <td mat-cell *matCellDef="let row" class="pl-0 text-secondary">
                        {{row.date}}
                    </td>
                </ng-container>

                <!-- Type Column -->
                <ng-container matColumnDef="time">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Hora</th>
                    <td mat-cell *matCellDef="let row" class="pl-0 text-secondary">
                        {{row.time}}
                    </td>
                </ng-container>

                <ng-container matColumnDef="service">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Motivo</th>
                    <td mat-cell *matCellDef="let row" class="pl-0 text-secondary">
                        {{ row.reason}}
                    </td>
                </ng-container>

                <ng-container matColumnDef="doctor">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Especialista</th>
                    <td mat-cell *matCellDef="let row" class="pl-0 text-secondary">
                    </td>
                </ng-container>
                       <ng-container matColumnDef="options">
                           <th  mat-header-cell
                               *matHeaderCellDef>Acciones</th>
                           <td mat-cell *matCellDef="let row" class="no-pad">
                               <div class="row">
                                 <!---  <button (click)=" editPagos(row)" style="border-radius: 10px;text-align: center;background: rgb(0, 89, 255); 
                                      width:30%" mat-icon-button type=" button"
                                       [ngStyle]="{'display': row.status === 3 ?'none' : row.status === 4 ?'none' : row.status === 1 ?'none' :'' }">
                                       <p style=" font-weight: bold;color: white;">
                                           Pagar
                                       </p>
                                   </button>-->
                                   <button (click)=" editUser(row) " mat-icon-button type=" button">
                                       <mat-icon [icIcon]="baselineOpenInNew" color="primary"></mat-icon>
                                   </button>
                                   <button mat-icon-button type="button" (click)="delete(row)">
                                       <mat-icon [icIcon]="baselineDeleteForever" color="red"></mat-icon>
                                   </button>
                               </div>
                           </td>
                       </ng-container>
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
            </table>
            </div>
            <div [hidden]="data.length > 0" class="pt-9 pb-9">
                <div class="alternate-result">
                    <div fxLayout="row" fxFlex fxLayoutAlign="center center">
                        <div [hidden]="!loadingRecords">
                            <div fxLayout="column" fxLayoutAlign="center center">
                                <mat-spinner diameter="32"></mat-spinner>
                                <span>CARGANDO</span>
                            </div>
                        </div>
                        <div [hidden]="loadingRecords || data.length > 0">
                            <div fxLayout="column" fxLayoutAlign="center center">
                                <span class="text-secondary headline-1">NO HAY CITAS PROGRAMADAS</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <mat-paginator [length]="resultsLength" (page)="pageChange($event)" [pageSizeOptions]="pageSizeOptions"
                [pageSize]="pageSize" class="sticky left-0">
            </mat-paginator>
        </div>
    </vex-page-layout-content>
</vex-page-layout>