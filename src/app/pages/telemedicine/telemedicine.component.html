<vex-page-layout @stagger>
    <vex-page-layout-content fxLayout="column">
        <!-- <div fxLayout="row" fxLayoutAlign="start center" class="mb-6">
            <h1 class="display-1 font-medium mt-4">Teleorientación</h1>
        </div> -->
        <div fxLayout="column" fxFlex fxLayoutAlign="center stretch" fxLayoutGap="8px" [ngClass]="{'hidden': !alertIsVisible}" class="p-6 mt-6 mb-4" style="background-color: #102177;border-radius: 4px;position:relative;">
            <h4 class="font-bold text-white">Ayuda</h4>
            <p class="text-white">Para hacer posible la consulta, el paciente de instalar nuestra app. Comparta el enlace de dewscarga aquí.<br>A la hora de inicio de la cita, el especialista deberá inicial la llamada pulsando el botón iniciar. <mat-icon [icIcon]="icCamera" color="primary" size="32px"></mat-icon></p>
            <a (click)="alertIsVisible = !alertIsVisible" style="position: absolute;top: 10px;right: 12px;padding: 2px;">
                <ic-icon [icon]="icClose" style="color:white;"></ic-icon>
            </a>
        </div>
        <div class="card overflow-auto">
            <!-- table -->
            <table @stagger [dataSource]="data" class="w-full" (matSortChange)="sortRecords($event)" mat-table matSort>
                <!-- Code Column -->
                <ng-container matColumnDef="status">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Estado</th>
                    <td mat-cell *matCellDef="let row">
                        <div fxLayout="column" fxLayoutAlign="center start">
                            <span class="text-white bg-blue p-2 pl-6 pr-6 caption" style="border-radius: 32px;background-color: #008cff;">{{ row.status }}</span>
                        </div>
                    </td>
                </ng-container>

                <!-- Type Column -->
                <ng-container matColumnDef="patient">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Paciente</th>
                    <td mat-cell *matCellDef="let row" class="pl-0">
                        {{row.patient}}
                    </td>
                </ng-container>

                <!-- Distribuitor Column -->
                <ng-container matColumnDef="phone">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Teléfono</th>
                    <td mat-cell *matCellDef="let row" class="pl-0 text-secondary">
                        {{ row.phone }}
                    </td>
                </ng-container>

                <!-- Type Column -->
                <ng-container matColumnDef="date">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Fecha</th>
                    <td mat-cell *matCellDef="let row" class="pl-0 text-secondary">
                        {{row.date}}
                    </td>
                </ng-container>

                <!-- Type Column -->
                <ng-container matColumnDef="time">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Hora</th>
                    <td mat-cell *matCellDef="let row" class="pl-0 text-secondary">
                        {{row.time}}
                    </td>
                </ng-container>

               <ng-container matColumnDef="service">
                   <th mat-header-cell *matHeaderCellDef mat-sort-header>Motivo</th>
                   <td mat-cell *matCellDef="let row" class="pl-0 text-secondary">
                       {{ row.service }}
                   </td>
               </ng-container>

               <ng-container matColumnDef="doctor">
                   <th mat-header-cell *matHeaderCellDef mat-sort-header>Especialista</th>
                   <td mat-cell *matCellDef="let row" class="pl-0">
                       {{ row.doctor }}
                   </td>
               </ng-container>

               <ng-container matColumnDef="options">
               <th mat-header-cell *matHeaderCellDef>Opciones</th>
               <td mat-cell *matCellDef="let element" class="center no-pad">
                   <button mat-icon-button type="button" (click)="startCall()">
                       <mat-icon [icIcon]="icCamera" color="primary"></mat-icon>
                   </button>
                   <button mat-icon-button type="button">
                       <mat-icon [icIcon]="icMore"></mat-icon>
                   </button>
                   <button mat-icon-button type="button">
                       <mat-icon [icIcon]="icRemove" style="color:red;"></mat-icon>
                   </button>
               </td>
               </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
            </table>

            <div [hidden]="data.length > 0" class="pt-9 pb-9">
                <div class="alternate-result">
                    <div fxLayout="row" fxFlex fxLayoutAlign="center center">
                        <div [hidden]="!loadingRecords">
                            <div fxLayout="column" fxLayoutAlign="center center">
                                <mat-spinner diameter="32"></mat-spinner>
                                <span>CARGANDO</span>
                            </div>
                        </div>
                        <div [hidden]="loadingRecords || data.length > 0">
                            <div fxLayout="column" fxLayoutAlign="center center">
                                <span class="text-secondary headline-1">NO HAY RESULTADOS</span>
                                <span class="text-secondary headline-1">CREA UN NUEVO INGRESO</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <mat-paginator [length]="resultsLength" (page)="pageChange($event)" [pageSizeOptions]="pageSizeOptions"
                [pageSize]="pageSize" class="sticky left-0">
            </mat-paginator>
        </div>
        <div [id]="localCallId" class="local"></div>
        <div style="position:relative;width: 300px;height: 300px;">
            <div *ngFor="let callId of remoteCalls" [id]="callId" class="remote"></div>
        </div>
    </vex-page-layout-content>


</vex-page-layout>
